div(ng-controller="HistoryCtrl")

    h2 History Graph
        button.btn.btn-primary(ng-click='getData()') Reload data
        button.btn.btn-info(ng-click='getDummyData()') Load dummy data
        button.btn.btn-info(ng-click='showJson=!showJson') {{showJson?'Hide':'Show'}} JSON

    //-p TODO make toggle button for hour, day, month

    h3 Data for one hour {{selectedHour}}

    //- easy way of setting a selectable range
    .btn.btn-default(ng-repeat="n in [] | range:24", ng-click="updateHour($index)", ng-class='{active: $index==selectedHour}') {{$index+1}}

    nvd3-line-chart(
        data="hdata",
        height="400",
        xAxisTickFormat="xAxisTickFormatFunction()",
        showXAxis="true",
        showYAxis="true",
        xAxisRotateLabels="45")
        svg

    h3 Data for a day {{selectedDay}}

    //- FIXME nr of days in month
    .btn.btn-default(ng-repeat="n in [] | range:31", ng-click="updateDay($index)", ng-class='{active: $index==selectedDay}') {{$index+1}}

    nvd3-line-chart(
        data="ddata",
        height="400",
        xAxisTickFormat="xAxisTickFormatFunction()",
        showXAxis="true",
        showYAxis="true",
        xAxisRotateLabels="45")
        svg

    h3 Data for a month {{selectedMonth}}

    .btn.btn-default(ng-repeat="n in [] | range:12", ng-click="updateMonth($index)", ng-class='{active: $index==selectedMonth}') {{$index+1}}

    //- nvd3-multi-bar-chart(
    nvd3-line-chart(c
        data="mdata",
        id="exampleId",
        xAxisTickFormat="xAxisTickFormatFunction()",
        height="400",
        showXAxis="true",
        showYAxis="true",
        xAxisRotateLabels="45")
        svg

    p(ng-if='showJson')
        | Data (raw data):
        code {{data}}